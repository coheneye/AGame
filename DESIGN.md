# 设计方案

## 设计目标

设计一个完整的基于事件的分布式游戏服务器引擎。

## 简单分析

    基于事件是指客户端和服务器不需要帧同步，也不同于stateless 的 HTTP 服务，由客户端操作事件触发的服务器模型。

## 分布式设计

系统分为几个模块(最常见的设计)

-agent: 网络接入，登陆包需要到 login 验证，其他无脑转发到 master.
-master: 消息路由和事件分发
-hall: 登录后默认连接的逻辑服务器，处理和具体游戏无关的业务，比如推送公告、离线消息等。
-logic(1 - N): 多个逻辑服务器，连接到 master, 接收从 master 转发过来的消息，并返回消息给 master.
-redis: 作为集中式存储
-mysql: 落地数据和一些系统运行关系不大的数据
-elastic search: 日志分析
-kafka: 队列

## 消息路由

消息类型分为几种

-. 请求应答 1-1
-. 主动单个推送 -1
-. 主动多个推送 -N
-. 主动全局广播 -A

